# Sprint 2 – AI Integration
**Duration:** 2 weeks  
**Goal:** Deliver the `/v1/generate` endpoint that returns PSADT scripts generated by an LLM.

---

## Tickets

### 🤖 LLM Client
- [ ] **SP2‑01** Implement `services/llm_client.py` with OpenAI provider and env‑configurable API key.
- [ ] **SP2‑02** Add provider interface so Anthropic or Gemini can be swapped in.

### 🔍 Retrieval & Prompting
- [ ] **SP2‑03** Integrate Chroma vector store; index PSADT docs from `/docs/raw`.
- [ ] **SP2‑04** Build prompt template for script generation with user context + RAG chunks.

### 📝 Generation Service
- [ ] **SP2‑05** Implement `services/script_generator.py` that orchestrates prompt build, LLM call, validation.
- [ ] **SP2‑06** Integrate compliance linter to post‑process output.

### 🌐 API
- [ ] **SP2‑07** Add POST `/v1/generate` route accepting JSON `{ "installer_metadata": {...}, "user_notes": "..." }`.
- [ ] **SP2‑08** Store generated script in DB row & return it.

### 🧪 Tests
- [ ] **SP2‑09** Unit tests for prompt builder and validator.
- [ ] **SP2‑10** Integration test hitting `/v1/generate` and asserting script passes linter.

### 🔐 Security
- [ ] **SP2‑11** Add simple header API‑key auth middleware.

---

## Definition of Done
* `/v1/generate` returns a valid PSADT script for fixture installer.
* Script stored in SQLite row.
* All tests & linters green; coverage ≥ 85 %.
