# SprintÂ 2 â€“ AI Integration
**Duration:** 2â€¯weeks  
**Goal:** Deliver the `/v1/generate` endpoint that returns PSADT scripts generated by an LLM.

---

## Tickets

### ğŸ¤– LLM Client
- [ ] **SP2â€‘01** Implement `services/llm_client.py` with OpenAI provider and envâ€‘configurable API key.
- [ ] **SP2â€‘02** Add provider interface so Anthropic or Gemini can be swapped in.

### ğŸ” Retrieval & Prompting
- [ ] **SP2â€‘03** Integrate Chroma vector store; index PSADT docs from `/docs/raw`.
- [ ] **SP2â€‘04** Build prompt template for script generation with user context + RAG chunks.

### ğŸ“ Generation Service
- [ ] **SP2â€‘05** Implement `services/script_generator.py` that orchestrates prompt build, LLM call, validation.
- [ ] **SP2â€‘06** Integrate compliance linter to postâ€‘process output.

### ğŸŒ API
- [ ] **SP2â€‘07** Add POST `/v1/generate` route accepting JSON `{ "installer_metadata": {...}, "user_notes": "..." }`.
- [ ] **SP2â€‘08** Store generated script in DB row & return it.

### ğŸ§ª Tests
- [ ] **SP2â€‘09** Unit tests for prompt builder and validator.
- [ ] **SP2â€‘10** Integration test hitting `/v1/generate` and asserting script passes linter.

### ğŸ” Security
- [ ] **SP2â€‘11** Add simple header APIâ€‘key auth middleware.

---

## Definition of Done
* `/v1/generate` returns a valid PSADT script for fixture installer.
* Script stored in SQLite row.
* All tests & linters green; coverage â‰¥â€¯85â€¯%.
